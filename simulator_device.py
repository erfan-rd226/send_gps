#!/usr/bin/python3

import urllib
import httplib2
import time
import datetime
import http.client
import sys

server = 'localhost:8000'

points_1 = [
    (31.864710, 54.331650, 0.0),
    (31.863975, 54.331681, 50.0),
    (31.865756, 54.332132, 50.0),
    (31.867925, 54.332584, 0.0),
    (31.870407, 54.332277, 50.0),
    (31.871694, 54.331339, 0.0),
    (31.874221, 54.328921, 0.0),
    (31.875879, 54.331877, 50.0),
    (31.877296, 54.333637, 50.0),
    (31.871058, 54.333031, 50.0),  #
    (31.880148, 54.337574, 0.0),
    (31.882006, 54.340214, 50.0),
    (31.882006, 54.340214, 0.0),
    (31.884106, 54.346098, 0.0),
    (31.877147, 54.336096, 50.0),  #
    (31.885760, 54.350626, 50.0),
    (31.887008, 54.355132, 50.0),
    (31.887368, 54.358336, 0.0),
    (31.887634, 54.361090, 50.0),
    (31.887945, 54.364125, 0.0),
    (31.888291, 54.364697, 0.0),
    (31.888881, 54.364728, 50.0),
    (31.890475, 54.365823, 50.0),
    (31.892161, 54.366976, 0.0),
    (31.893565, 54.367925, 50.0),
    (31.895111, 54.368944, 0.0),
    (31.896674, 54.370011, 0.0),
    (31.898707, 54.371314, 50.0),
    (31.900875, 54.372864, 50.0),
    (31.903073, 54.374352, 0.0),
    (31.905058, 54.375708, 50.0),
    (31.907744, 54.377516, 0.0),
    (31.909912, 54.378973, 0.0),
    (31.912088, 54.380487, 50.0),
    (31.914054, 54.382023, 50.0),
    (31.914595, 54.382674, 0.0),
    (31.915451, 54.382775, 50.0),
    (31.916822, 54.383688, 0.0),
    (31.918190, 54.384629, 0.0),
    (31.918585, 54.384883, 50.0),
    (31.918527, 54.384504, 50.0),

    (31.917884, 54.384340, 0.0),
    (31.915260, 54.382517, 50.0),
    (31.914692, 54.381681, 0.0),
    (31.914692, 54.381681, 50.0),
    (31.914692, 54.381681, 50.0),
    (31.909843, 54.378845, 0.0),
    (31.907205, 54.377071, 50.0),
    (31.905338, 54.375820, 0.0),
    (31.902089, 54.373574, 0.0),
    (31.898574, 54.371141, 50.0),
    (31.896054, 54.369510, 50.0),
    (31.892550, 54.367159, 0.0),
    (31.889979, 54.365406, 50.0),
    (31.888627, 54.364172, 0.0),
    (31.888160, 54.363872, 0.0),
    (31.887753, 54.361813, 50.0),
    (31.887450, 54.358606, 50.0),
    (31.887301, 54.356185, 0.0),
    (31.887551, 54.355205, 50.0),
    (31.886952, 54.354384, 0.0),
    (31.886035, 54.350842, 0.0),
    (31.884688, 54.346408, 50.0),
    (31.884564, 54.345139, 50.0),
    (31.883712, 54.343101, 0.0),
    (31.882113, 54.340100, 50.0),
    (31.880551, 54.337938, 0.0),
    (31.878520, 54.335090, 0.0),
    (31.877128, 54.333148, 50.0),
    (31.876504, 54.331807, 50.0),
    (31.875825, 54.330501, 0.0),
    (31.874511, 54.328133, 50.0),
    (31.874555, 54.327306, 0.0),
    (31.873964, 54.327158, 0.0),
    (31.873814, 54.328315, 50.0),
    (31.872690, 54.329969, 50.0),
    (31.871502, 54.331306, 0.0),
    (31.869483, 54.332371, 50.0),
    (31.868280, 54.332460, 0.0),
    (31.865672, 54.331958, 0.0),
    (31.863907, 54.331562, 50.0),
    (31.863347, 54.331283, 50.0),
    (31.863073, 54.330856, 50.0),
    (31.863330, 54.330757, 50.0),
]

points_2 = [
    (31.917884, 54.384340, 0.0),
    (31.915260, 54.382517, 50.0),
    (31.914692, 54.381681, 0.0),
    (31.914692, 54.381681, 50.0),
    (31.914699, 54.379992, 50.0),  #
    (31.914692, 54.381681, 50.0),
    (31.909843, 54.378845, 0.0),
    (31.907205, 54.377071, 50.0),
    (31.905338, 54.375820, 0.0),
    (31.902089, 54.373574, 0.0),
    (31.898574, 54.371141, 50.0),
    (31.896054, 54.369510, 50.0),
    (31.892550, 54.367159, 0.0),
    (31.889979, 54.365406, 50.0),
    (31.888627, 54.364172, 0.0),
    (31.888160, 54.363872, 0.0),
    (31.887753, 54.361813, 50.0),
    (31.887450, 54.358606, 50.0),
    (31.887301, 54.356185, 0.0),
    (31.887551, 54.355205, 50.0),
    (31.886952, 54.354384, 0.0),
    (31.886035, 54.350842, 0.0),
    (31.884688, 54.346408, 50.0),
    (31.884564, 54.345139, 50.0),
    (31.883712, 54.343101, 0.0),
    (31.882113, 54.340100, 50.0),
    (31.899655, 54.369795, 50.0),  #
    (31.880551, 54.337938, 0.0),
    (31.878520, 54.335090, 0.0),
    (31.877128, 54.333148, 50.0),
    (31.876504, 54.331807, 50.0),
    (31.875825, 54.330501, 0.0),
    (31.874511, 54.328133, 50.0),
    (31.874555, 54.327306, 0.0),
    (31.873964, 54.327158, 0.0),
    (31.873814, 54.328315, 50.0),
    (31.872690, 54.329969, 50.0),
    (31.871502, 54.331306, 0.0),
    (31.869483, 54.332371, 50.0),
    (31.868280, 54.332460, 0.0),
    (31.865672, 54.331958, 0.0),
    (31.863907, 54.331562, 50.0),
    (31.863347, 54.331283, 50.0),
    (31.863073, 54.330856, 50.0),
    (31.863330, 54.330757, 50.0),

    (31.864710, 54.331650, 0.0),
    (31.863975, 54.331681, 50.0),
    (31.865756, 54.332132, 50.0),
    (31.867925, 54.332584, 0.0),
    (31.870407, 54.332277, 50.0),
    (31.871694, 54.331339, 0.0),
    (31.874221, 54.328921, 0.0),
    (31.875879, 54.331877, 50.0),
    (31.877296, 54.333637, 50.0),
    (31.880148, 54.337574, 0.0),
    (31.882006, 54.340214, 50.0),
    (31.882006, 54.340214, 0.0),
    (31.884106, 54.346098, 0.0),
    (31.885760, 54.350626, 50.0),
    (31.887008, 54.355132, 50.0),
    (31.887368, 54.358336, 0.0),
    (31.887634, 54.361090, 50.0),
    (31.887945, 54.364125, 0.0),
    (31.888291, 54.364697, 0.0),
    (31.888881, 54.364728, 50.0),
    (31.890475, 54.365823, 50.0),
    (31.892161, 54.366976, 0.0),
    (31.893565, 54.367925, 50.0),
    (31.895111, 54.368944, 0.0),
    (31.896674, 54.370011, 0.0),
    (31.898707, 54.371314, 50.0),
    (31.900875, 54.372864, 50.0),
    (31.903073, 54.374352, 0.0),
    (31.905058, 54.375708, 50.0),
    (31.907744, 54.377516, 0.0),
    (31.909912, 54.378973, 0.0),
    (31.912088, 54.380487, 50.0),
    (31.914054, 54.382023, 50.0),
    (31.914595, 54.382674, 0.0),
    (31.915451, 54.382775, 50.0),
    (31.916822, 54.383688, 0.0),
    (31.918190, 54.384629, 0.0),
    (31.918585, 54.384883, 50.0),
    (31.918527, 54.384504, 50.0),
]

points_3 = [
    (31.834578297898325, 54.37433193167496, 50.0),
    (31.83456776216746, 54.37347004936033, 50.0),
    (31.83457303003306, 54.37323442685706, 50.0),
    (31.8336616848005, 54.3716780781793, 40.0),
    (31.832534343562674, 54.36988920729004, 50.0),
    (31.831399086477337, 54.36792982011782, 50.0),
    (31.83064311868044, 54.366633896313786, 50.0),
    (31.831701489344024, 54.36565726759154, 60.0),
    (31.8330374335939, 54.36486723036463, 50.0),
    (31.834090885207875, 54.36425716300748, 40.0),
    (31.834760786066504, 54.363865194732206, 50.0),
    (31.835032891409128, 54.36389417292931, 51.0),
    (31.835200041439048, 54.36361201677097, 50.0),
    (31.836127141159974, 54.363068626540425, 52.0),
    (31.83688880957698, 54.3626203428726, 50.0),
    (31.837913711882102, 54.36217956920881, 60.0),
    (31.839011161031344, 54.362278705151894, 50.0),
    (31.839808001992104, 54.36236411458228, 54.0),
    (31.840017900421948, 54.36204535439089, 50.0),
    (31.8402200243799, 54.360294461075284, 30.0),
    (31.840397530312302, 54.358241584413456, 50.0),
    (31.83963308628018, 54.355967558339096, 40.0),
    (31.840312063975702, 54.35446070421604, 50.0),
    (31.84114128501359, 54.353833860004414, 30.0),
    (31.843110655101935, 54.35256949540099, 50.0),
    (31.844039613111274, 54.351910622652646, 12.0),
    (31.844995769324434, 54.35092078836471, 30.0),
    (31.845954506799796, 54.34958779118971, 20.0),
    (31.84678626826573, 54.34848204410475, 60.0),
    (31.84796652750286, 54.34714294625773, 30.0),
    (31.848372035700205, 54.346802833703535, 20.0),
    (31.848767177752567, 54.34620649286032, 10.0),
    (31.84945640508439, 54.345372225753906, 10.0),
    (31.85035032008203, 54.34430613304271, 10.0),
    (31.85118722394811, 54.34331477358385, 10.0),
    (31.852125169107914, 54.34226088222254, 10.0),
    (31.853217267262472, 54.34102549582382, 10.0),
    (31.853649957376785, 54.34172097259907, 10.0),
    (31.854256238315923, 54.34033611971065, 10.0),
    (31.85536903847147, 54.33971995167942, 10.0),
    (31.856501766784163, 54.33907619959985, 10.0),
    (31.85751090612828, 54.338540865492995, 10.0),
    (31.858615894564867, 54.337918596786714, 10.0),
    (31.859666463317563, 54.33698214339076, 50.0),
    (31.86015352935699, 54.336285141433855, 50.0),
    (31.860758472154714, 54.33495824493398, 40.0),
    (31.861492947694483, 54.333477306420825, 50.0),
    (31.862004615906464, 54.33260796043009, 45.0),
    (31.862478716076573, 54.33257440672421, 50.0),
    (31.863296079749617, 54.33284588669644, 50.0),
    (31.86374556192086, 54.33250729931887, 46.0),
    (31.86382975862382, 54.331994842739675, 50.0),
    (31.863474836611804, 54.33140917807392, 47.0),
    (31.863215768587676, 54.331159050457096, 51.0),
    (31.863328463266143, 54.33093942621323, 48.0),
    (31.86375851526154, 54.331098043721326, 10.0),

    (31.864706408895504, 54.331625490367585, 30.0),
    (31.864084928745932, 54.33161405668288, 40.0),
    (31.863283795787815, 54.33121101929113, 50.0),
    (31.86246808962558, 54.33074223820266, 45.0),
    (31.86159168299843, 54.33141396719106, 55.0),
    (31.861761623990144, 54.332580203045936, 60.0),
    (31.861186251072414, 54.333803607347264, 40.0),
    (31.86052590304766, 54.33515564059388, 50.0),
    (31.85983398919765, 54.33648766488897, 90.0),
    (31.859025535901775, 54.33739950127626, 70.0),
    (31.85750086596722, 54.338377081332936, 50.0),
    (31.856282083012132, 54.339040235056856, 51.1),
    (31.855233236969756, 54.33962335299099, 53.0),
    (31.85520653008664, 54.33934608613679, 58.0),
    (31.85378377037879, 54.340440861467705, 40.0),
    (31.85201135982889, 54.342173064739384, 30.0),
    (31.850603118948083, 54.34377378062948, 40.0),
    (31.84953235588118, 54.344997184930925, 50.0),
    (31.84842758730471, 54.34632635081314, 0.0),
    (31.848167782668867, 54.346446404502586, 40.0),
    (31.847701589326245, 54.34712099192115, 30.0),
    (31.845572068560674, 54.34980579588705, 50.0),
    (31.8444538574393, 54.351272935437215, 45.0),
    (31.84307598113148, 54.35218989765792, 50.0),
    (31.8422438465191, 54.35104172087279, 40.0),
    (31.84112769781681, 54.34764511080916, 50.0),
    (31.83987098088599, 54.34550884744755, 40.0),
    (31.837572467505506, 54.34155749020324, 50.0),
    (31.836323970377556, 54.339489353655125, 40.0),
    (31.834719916199166, 54.3377959148214, 60.0),
    (31.83226003670122, 54.33531415103259, 40.0),
    (31.83118097642277, 54.33448203022204, 50.0),
    (31.83408324778726, 54.33740175232792, 50.0),
    (31.83629503150468, 54.33963047355538, 50.0),
    (31.838118162889707, 54.34272051280444, 50.0),
    (31.839833775173876, 54.34564023492366, 50.0),
    (31.841487347175438, 54.34917309867436, 50.0),
    (31.842281051231065, 54.35148454538951, 50.0),
    (31.841933806561382, 54.35303686428334, 50.0),
    (31.839680818286023, 54.35499307810344, 50.0),
    (31.840106616603872, 54.35764515903275, 50.0),
    (31.839961928075834, 54.361552720471245, 50.0),
    (31.838424183453636, 54.36214647572747, 50.0),
    (31.837244626187704, 54.36232601777119, 50.0),
    (31.83642909588037, 54.36280719043799, 50.0),
    (31.8351600269037, 54.3635564792062, 50.0),
    (31.83489156777362, 54.36352296469344, 50.0),
    (31.834429897584094, 54.36398498620134, 50.0),
    (31.833248255438, 54.36466963983622, 50.0),
    (31.832032022757428, 54.36538302019734, 50.0),
    (31.830537132890537, 54.36626636701371, 50.0),
    (31.83064492847852, 54.366907930543654, 50.0),
    (31.83071204642256, 54.367065927532366, 50.0),
    (31.83083407892299, 54.36726701460893, 50.0),
    (31.83186117942273, 54.36897864869155, 50.0),
    (31.832910640609267, 54.370707040036464, 50.0),
    (31.83396619127503, 54.37240431075538, 50.0),
    (31.834507181739507, 54.373345111044536, 50.0),
    (31.834598702366435, 54.37433857695844, 50.0),
]

points_4 = [
    (31.864706408895504, 54.331625490367585, 30.0),
    (31.864084928745932, 54.33161405668288, 40.0),
    (31.863283795787815, 54.33121101929113, 50.0),
    (31.86246808962558, 54.33074223820266, 45.0),
    (31.86159168299843, 54.33141396719106, 55.0),
    (31.861761623990144, 54.332580203045936, 60.0),
    (31.861186251072414, 54.333803607347264, 40.0),
    (31.86052590304766, 54.33515564059388, 50.0),
    (31.85983398919765, 54.33648766488897, 90.0),
    (31.859025535901775, 54.33739950127626, 70.0),
    (31.85750086596722, 54.338377081332936, 50.0),
    (31.856282083012132, 54.339040235056856, 51.1),
    (31.855233236969756, 54.33962335299099, 53.0),
    (31.85520653008664, 54.33934608613679, 58.0),
    (31.85378377037879, 54.340440861467705, 40.0),
    (31.85201135982889, 54.342173064739384, 30.0),
    (31.850603118948083, 54.34377378062948, 40.0),
    (31.84953235588118, 54.344997184930925, 50.0),
    (31.84842758730471, 54.34632635081314, 0.0),
    (31.848167782668867, 54.346446404502586, 40.0),
    (31.847701589326245, 54.34712099192115, 30.0),
    (31.845572068560674, 54.34980579588705, 50.0),
    (31.8444538574393, 54.351272935437215, 45.0),
    (31.84307598113148, 54.35218989765792, 50.0),
    (31.8422438465191, 54.35104172087279, 40.0),
    (31.84112769781681, 54.34764511080916, 50.0),
    (31.83987098088599, 54.34550884744755, 40.0),
    (31.837572467505506, 54.34155749020324, 50.0),
    (31.836323970377556, 54.339489353655125, 40.0),
    (31.834719916199166, 54.3377959148214, 60.0),
    (31.83226003670122, 54.33531415103259, 40.0),
    (31.83118097642277, 54.33448203022204, 50.0),
    (31.83408324778726, 54.33740175232792, 50.0),
    (31.83629503150468, 54.33963047355538, 50.0),
    (31.838118162889707, 54.34272051280444, 50.0),
    (31.839833775173876, 54.34564023492366, 50.0),
    (31.841487347175438, 54.34917309867436, 50.0),
    (31.842281051231065, 54.35148454538951, 50.0),
    (31.841933806561382, 54.35303686428334, 50.0),
    (31.839680818286023, 54.35499307810344, 50.0),
    (31.840106616603872, 54.35764515903275, 50.0),
    (31.839961928075834, 54.361552720471245, 50.0),
    (31.838424183453636, 54.36214647572747, 50.0),
    (31.837244626187704, 54.36232601777119, 50.0),
    (31.83642909588037, 54.36280719043799, 50.0),
    (31.8351600269037, 54.3635564792062, 50.0),
    (31.83489156777362, 54.36352296469344, 50.0),
    (31.834429897584094, 54.36398498620134, 50.0),
    (31.833248255438, 54.36466963983622, 50.0),
    (31.832032022757428, 54.36538302019734, 50.0),
    (31.830537132890537, 54.36626636701371, 50.0),
    (31.83064492847852, 54.366907930543654, 50.0),
    (31.83071204642256, 54.367065927532366, 50.0),
    (31.83083407892299, 54.36726701460893, 50.0),
    (31.83186117942273, 54.36897864869155, 50.0),
    (31.832910640609267, 54.370707040036464, 50.0),
    (31.83396619127503, 54.37240431075538, 50.0),
    (31.834507181739507, 54.373345111044536, 50.0),
    (31.834598702366435, 54.37433857695844, 50.0),

    (31.834578297898325, 54.37433193167496, 50.0),
    (31.83456776216746, 54.37347004936033, 50.0),
    (31.83457303003306, 54.37323442685706, 50.0),
    (31.8336616848005, 54.3716780781793, 40.0),
    (31.832534343562674, 54.36988920729004, 50.0),
    (31.831399086477337, 54.36792982011782, 50.0),
    (31.83064311868044, 54.366633896313786, 50.0),
    (31.831701489344024, 54.36565726759154, 60.0),
    (31.8330374335939, 54.36486723036463, 50.0),
    (31.834090885207875, 54.36425716300748, 40.0),
    (31.834760786066504, 54.363865194732206, 50.0),
    (31.835032891409128, 54.36389417292931, 51.0),
    (31.835200041439048, 54.36361201677097, 50.0),
    (31.836127141159974, 54.363068626540425, 52.0),
    (31.83688880957698, 54.3626203428726, 50.0),
    (31.837913711882102, 54.36217956920881, 60.0),
    (31.839011161031344, 54.362278705151894, 50.0),
    (31.839808001992104, 54.36236411458228, 54.0),
    (31.840017900421948, 54.36204535439089, 50.0),
    (31.8402200243799, 54.360294461075284, 30.0),
    (31.840397530312302, 54.358241584413456, 50.0),
    (31.83963308628018, 54.355967558339096, 40.0),
    (31.840312063975702, 54.35446070421604, 50.0),
    (31.84114128501359, 54.353833860004414, 30.0),
    (31.843110655101935, 54.35256949540099, 50.0),
    (31.844039613111274, 54.351910622652646, 12.0),
    (31.844995769324434, 54.35092078836471, 30.0),
    (31.845954506799796, 54.34958779118971, 20.0),
    (31.84678626826573, 54.34848204410475, 60.0),
    (31.84796652750286, 54.34714294625773, 30.0),
    (31.848372035700205, 54.346802833703535, 20.0),
    (31.848767177752567, 54.34620649286032, 10.0),
    (31.84945640508439, 54.345372225753906, 10.0),
    (31.85035032008203, 54.34430613304271, 10.0),
    (31.85118722394811, 54.34331477358385, 10.0),
    (31.852125169107914, 54.34226088222254, 10.0),
    (31.853217267262472, 54.34102549582382, 10.0),
    (31.853649957376785, 54.34172097259907, 10.0),
    (31.854256238315923, 54.34033611971065, 10.0),
    (31.85536903847147, 54.33971995167942, 10.0),
    (31.856501766784163, 54.33907619959985, 10.0),
    (31.85751090612828, 54.338540865492995, 10.0),
    (31.858615894564867, 54.337918596786714, 10.0),
    (31.859666463317563, 54.33698214339076, 50.0),
    (31.86015352935699, 54.336285141433855, 50.0),
    (31.860758472154714, 54.33495824493398, 40.0),
    (31.861492947694483, 54.333477306420825, 50.0),
    (31.862004615906464, 54.33260796043009, 45.0),
    (31.862478716076573, 54.33257440672421, 50.0),
    (31.863296079749617, 54.33284588669644, 50.0),
    (31.86374556192086, 54.33250729931887, 46.0),
    (31.86382975862382, 54.331994842739675, 50.0),
    (31.863474836611804, 54.33140917807392, 47.0),
    (31.863215768587676, 54.331159050457096, 51.0),
    (31.863328463266143, 54.33093942621323, 48.0),
    (31.86375851526154, 54.331098043721326, 10.0),
]

import json
def send(conn, time, lat, lon, speed, device_id):
    params = (('id ', device_id), ('timestamp', int(time)), ('lat', lat), ('lon', lon), ('speed', speed))
    # print(f"time : {moment}, device_id: {device_id}, server: {server}, lat: {lat}, lon: {lon}")
    data = {"device_id": device_id, "timestamp": int(time), "lat": lat, "lon": lon, "speed":speed}
    headers = {'Content-type': 'application/json'}
    conn.request('POST', '', json.dumps(data), headers)
    conn.getresponse().read()


conn = http.client.HTTPConnection(server)
# httplib.HTTPConnection(server)

if len(sys.argv) > 1:
    argument_allowed = ["112233", "445566", "778899", "001122", "887766", "998877", "554433", "221100"]
    argument = sys.argv[1]
    if argument in argument_allowed:
        for i, j, k, l in zip(points_1, points_2, points_3, points_4):
            (lat_1, lon_1, speed_1) = i
            (lat_2, lon_2, speed_2) = j
            (lat_3, lon_3, speed_3) = k
            (lat_4, lon_4, speed_4) = l
            moment = str(datetime.datetime.now()).split('.')[0]
            if argument == "112233" or argument == "445566":
                send(conn, time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()), lat_1,
                     lon_1, speed_1, argument)
            if argument == "778899" or argument == "001122":
                send(conn, time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()), lat_2,
                     lon_2, speed_2, argument)
            if argument == "887766" or argument == "998877":
                send(conn, time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()), lat_3,
                     lon_3, speed_3, argument)
            if argument == "221100" or argument == "554433":
                send(conn, time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()), lat_4,
                     lon_4, speed_4, argument)
            time.sleep(5)
        print("Please enter one of the device IDs 112233, 445566, 778899, 001122, 887766, 998877", "554433", "221100")
else:
    print("please enter argument")


# docker run --name traccar --hostname traccar --detach --restart unless-stopped --publish 80:8082 --publish 5000-5150:5000-5150 --publish 5000-5150:5000-5150/udp --volume /opt/traccar/logs:/opt/traccar/logs:rw --volume /opt/traccar/traccar.xml:/opt/traccar/conf/traccar.xml:ro traccar/traccar:latest